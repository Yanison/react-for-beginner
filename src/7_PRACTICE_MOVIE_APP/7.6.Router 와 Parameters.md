# 리엑트에서 페이징 처리와 패스 파라미터는 어떻게 처리할까?

## Router

**React Router**는 **"CLIENT-SIDE-ROUTING"** 기능을 제공합니다.
전통적인 웹사이트에서 브라우저가 웹서버에서 정적 리소스를 요청할때 CSS와 JS 자원을 다운로드하고 서버에서부터 HTML을 렌더링합니다.
유저가 링크를 클릭할때마다 위의 과정이 새로운 페이지에 대하여 반복됩니다.

**"CLIENT-SIDE-ROUTING"**은 서버에 새로운 리소스를 요청하는 작업 없이 링크를 클릭하여 URL을 업데이트 할 수 있는 기능입니다.
`fetch()`로 서버에 요청을 하여서 새로운 정보의 페이지로 업데이트가 가능합니다. 그리하여 새로운 데이터들로 새로운 UI를 즉시 렌더링이 가능하게 합니다.

브라우저는 모든 JS,CSS와 같은 모든 리소스를 다시 요청하지 않아도 되기 때문에 유저에게 빠른 UI경험을 제공할 수 있습니다.
그리고 애니메이션처럼 다이나믹한 경험을 제공할 수 있습니다.

**React Router**에서 제공하는 다양한 컴포넌트를 사용하여 라우팅을 구현할 수 있습니다. 
본 강의에서 사용할 Router Components는 다음과 같습니다.

- BrowserRouter : 현재 위치를 브라우저의 주소창에 깔끔한 clean URLs 형식으로 저장하며, 브라우저의 내장된 히스토리 스택을 사용하여 페이지 간 탐색을 수행합니다.
- Route : React Router 앱에서 핵심 컴포넌트로 URL 세그먼트와 컴포넌트를 묶어, 데이터를 로딩하고 렌더링합니다.라우트 중첩을 통하여 복잡한 어플리케이션 레이아웃과 데이터 의존성들을 간단하게 관리할 수 있습니다.
- Link : `<a>` 처럼 페이지를 탐색할 수 있는 요소입니다. `react-router-dom`에서 `<Link>`는 `<a>` 요소로 렌더링되고 원하는 링크로 연결된 href속성을 가집니다. `<Link reloadDocument>` 처럼 reloadDocument 속성을 추가하여 페이지 전체를 리로딩할 수 있는 기능도 제공합니다.  

Router를 사용하려면 우선 npm을 통해 react-router-dom을 설치해야 합니다.
```shell
npm install react-router-dom
```

```jsx
import {
    BrowserRouter as Router,
    Routes,
    Route,
    Link,
} from "react-router-dom";
import Movie from "./components/Movie"
import Detail from "./routes/Detail";
import Home from "./routes/Home";

function App() {
    return(
        <Router>
            <Routes>
                <Route path="/movie/:id" element={<Detail />} />
                <Route path="/" element={<Home />} />
            </Routes>
        </Router>
    );
}

export default App;
```

위 코드에서 `BrowserRouter`는 라우터를 설정하는 컴포넌트입니다. 위 코드에서 `BrowserRouter`는 `Router`로 치환되어 사용되어졌습니다.
기본적인 사용은 `<BrowserRouter>` 안에 `<Routes>`, `<Routes>`의 자식 컴포넌트로는 `<Route>`를 사용합니다.
`<Route>`에 사용되는 속성은 `path`, `element`가 있습니다.

- `path`는 라우팅 경로를 설정합니다.
  - `/path/:id`와 같이 콜론은 해당 위치에 파라미터를 받아 element로 전달합니다.
- `element`는 해당 경로로 이동했을때 렌더링할 컴포넌트를 설정합니다.


## Parameters

### `<Detail />`

`<App />`컴포넌트에서 React Router를 사용해 라우팅을 설정하였습니다.
`<Route path="/movie/:id" element={<Detail />} />` 에서 파라미터로 넘겨진 `:id`를 `<Detail />`에서 어떻게 사용하는지 살펴보겠습니다. 

```jsx
import {useParams} from "react-router-dom";
import {useEffect} from "react";
function Detail(){
    const {id} = useParams();
    console.log(`id : ${id}`);
    const getMovie = async() =>{
        const json = await(
            await fetch(`https://yts.mx/api/v2/list_movies.json?movie_id=${id}`)
        ).json();

        console.log(json);
    }
    useEffect(() => getMovie, []);
    return (
        <div>Detail</div>
    )
}

export default Detail;
```

`import {useParams} from "react-router-dom";`에서 `useParams`를 사용하여 파라미터를 받아올 수 있습니다.
import한 useParams를 `const {id} = useParams();` 로 사용하여 라우팅 패스에서 `:`로 설정한 Path Parameter를 받아올 수 있습니다.




외에도 React Router에서 제공하는 다양한 기능들은 공식문서 [React Router](https://reactrouter.com/en/main)에서 확인할 수 있습니다.
